@page "/"
@using WeatherClient.Models
@inject HttpClient Http

<h1>Weather Dashboard</h1>

@if (forecasts == null)
{
    <p><em>Loading...</em></p>
}
else
{
    <div class="weather-container">
        @foreach (var forecast in forecasts)
        {
            <div class="weather-card">
                <h3>@forecast.City</h3>
                <p>Date: @forecast.Date.ToString("MMMM dd, yyyy")</p>
                <p>Temperature: @forecast.TemperatureC°C (@forecast.TemperatureF°F)</p>
                <p>Summary: @forecast.Summary</p>
            </div>
        }
    </div>
}

@code {
    private IEnumerable<WeatherForecastDTO>? forecasts;

    protected override async Task OnInitializedAsync()
    {
        try
        {
            forecasts = await Http.GetFromJsonAsync<IEnumerable<WeatherForecastDTO>>("/api/Weather");
        }
        catch (Exception ex)
        {
            Console.WriteLine($"Error loading weather data: {ex.Message}");
        }
    }
}